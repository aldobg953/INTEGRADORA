<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/login.css">
    <link rel="stylesheet" href="/website/css/uicons-bold-rounded.css">
    <link rel="stylesheet" href="css/global_font.css">
    <link rel="icon" href="css/IsotipoPathFinderTabIcon.ico" type="image/x-icon">
    <title>PathFInder | Login</title>
    <script>
        function changeLang(selectElement) {
            var selectedLang = selectElement.value;
            var currentUrl = window.location.href;
            
            // Reemplazar o añadir el parámetro lang en la URL actual
            var updatedUrl;
            if (currentUrl.includes('?')) {
                updatedUrl = currentUrl.replace(/(\?lang=)[^\&]+/, '$1' + selectedLang);
            } else {
                updatedUrl = currentUrl + '?lang=' + selectedLang;
            }
            
            // Redirigir a la nueva URL
            window.location.href = updatedUrl;
        }
    </script>
    
</head>

<body class="malla">
    <center>
        <header class="header">
            <nav class="navbar">
                <div class="navbar-logo">
                    <a th:href="@{/inicio}">
                        <img src="css/LogoLogoPathFinderHorizontal.svg" alt="" id="navbar-logo">
                    </a>
                    <hr>
                    
                </div>
        
                <div class="navbar-links" id="navbarLinks">
                    <a href=""><div class="link"><img src="css/assets/lenguage.png" alt="" id="link-icon">Idioma</div></a>
                    <a th:href="@{/acercade}"><div class="link"><img src="css/assets/about.png" alt="" id="link-icon">¿Quiénes somos?</div></a>
                    <hr>
                    <a th:href="@{/login}"><div class="link"><img src="css/assets/login.png" alt="" id="link-icon">Iniciar sesión</div></a>
                    <a th:href="@{/registro}"><div class="link" id="link-register"><img src="css/assets/register.png" alt="" id="link-icon">Registrarse</div></a>
                </div>
    
            </nav>
        </header>


        <div class="tarjeta" id="sign-in"> <!--TARJETA DE INICIO DE SESION-->

            <div id="logo-image"> <!--PARTE IZQUIERDA DE LA TARJETA DE INICIO DE SESION-->

                <img id="logo-horizontal-image" src="css/LogoLogoPathFinderHorizontal.svg" alt=""
                    style="max-width:40%;height:auto;">

                <img id="image-login" src="css/decision-77.svg" alt="" style="max-width:75%;height:auto;">

            </div>

            <div id="sign-in-form"> <!--PARTE DERECHA DE LA TARJETA DE INICIO DE SESION-->

                <div>
                    <p id="welcome-title" th:text="#{saludo_index}">¡Bienvenido!</p>
                </div>

                <div>
                    <p id="sign-in-title" th:text="#{inicioSesion}">Iniciar sesión</p>
                </div>

                <div th:if="${param.error}">
                    <p id="error" >ERROR: Ingresa tus datos nuevamente</p>
                </div>
                <div th:if="${mensajeExito}">
                    <p th:text="${mensajeExito}"></p>
                </div>

                <hr>

                <form th:action="@{/login}" method="post"> <!--FORMULARIO-->

                    <div class="input-group"> <!--INPUTS-->

                        <div class="input-group"> <!--INPUTS-->

                            <input id="username" required="" type="email" name="username" autocomplete="off" class="input"
                                th:placeholder="#{ingresaEmail}" />
                            <label for="email" class="email-label">
                                <i id="login-input-icon" class="fi-rr-envelope"></i>
                            </label>
    
                        </div>

                    </div>

                    <hr>

                    <div class="input-group">
                        <input id="password" name="password" required="" type="password" autocomplete="on" class="input"
                            th:placeholder="#{ingresaContra}">

                        <div for="name">
                            <i id="login-input-icon" class="fi-rr-lock"></i>
                        </div>


                    </div>

                    <hr>

                    <button class="btn btn-primary"> <!--BOTON DE INICIO DE SESION-->
                        <span class="btn-txt" th:text="#{inicioSesion}">Iniciar sesión</span>
                    </button>

                </form>

                <hr>

                <div class="create-account-message-login"> <!--MENSAJE DEBAJO DEL BOTON DE INICIO DE SESION-->
                    <p id="create-account-message-login"><span th:text="#{registrarMensaje}">¿No tienes una cuenta?</span>
                        <a th:href="${#strings.concat('/registro', (lang != null and lang != '' ? '?lang=' + lang : ''))}" id="create-account-message-login" th:text="#{creaCuenta}">¡Crea una!</a>
                    </p>
                </div>
            </div>

        </div>

    </center>

</body>

</html>